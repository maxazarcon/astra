:root{
  --bg:#15171a;
  --card:#23262a;
  --border:#222428;
  --user:#2463eb;
  --ai:#2e3136;
  --text:#f2f3f7;
  --text-light:#9fa4ad;
  --accent:#3c82f6;
}

html,body{
  height:100%;
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
}
body{min-height:100vh;display:flex;flex-direction:column}

/* Top bar */
.nav-top{
  display:flex;align-items:center;gap:1em;
  height:54px;padding:0 1.5em;background:var(--bg);
  box-shadow:0 1px 0 var(--border);position:sticky;top:0;z-index:20;
}
.brand{font-size:1.5em;letter-spacing:.18em;font-family:Georgia,serif;font-weight:400}
.icon-btn{background:none;border:none;color:var(--text);font-size:1.7em;cursor:pointer;padding:.1em .3em;border-radius:8px;transition:background .13s}
.icon-btn:hover,.icon-btn:focus{background:#23262a55}

/* Sidebar */
.sidebar{
  position:fixed;left:-320px;top:0;height:100%;width:320px;z-index:50;
  background:var(--card);color:var(--text);box-shadow:2px 0 24px #0007;
  transition:left .23s cubic-bezier(.43,.37,.26,1.19);display:flex;flex-direction:column;
}
.sidebar.open{left:0}
#sidebar-overlay{display:none;position:fixed;inset:0;background:#1118;z-index:49}
#sidebar.open ~ #sidebar-overlay{display:block}
.sidebar-content{padding:2em 1.5em 1em;display:flex;flex-direction:column;gap:2em}
.close-btn{font-size:2em;align-self:flex-end}
.sidebar-setting label{font-size:1.06em}
.sidebar-setting input[type="range"]{width:100%;margin-top:.6em}

/* Main and chat column */
main{
  flex:1 1 auto;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;
  margin-top:1.5em;min-height:0;
}

/* Chat surface tuned to reference */
.chat-thread{
  width:100%;max-width:720px;margin:0 auto;
  background:#1b1e22;border-radius:12px;
  box-shadow:0 12px 36px rgba(0,0,0,.25);
  padding:16px 14px 96px 14px; /* bottom room for input bar */
  box-sizing:border-box;overflow-y:auto;max-height:62vh;min-height:400px;
  display:flex;flex-direction:column;gap:1.2em;
}

/* Messages */
.message{display:flex;flex-direction:row;gap:.8em;align-items:flex-end}
.message.user{justify-content:flex-end}
.message.ai{justify-content:flex-start}

.bubble{
  border-radius:12px;padding:12px 14px;max-width:680px;min-width:3.5em;
  font-size:1.07em;line-height:1.52;box-shadow:0 2px 8px #0002;word-break:break-word;display:block;
}
.user .bubble{background:#2d61ff;color:#fff}
.ai .bubble{background:#2a2e33;color:var(--text)}
.bubble code,.bubble pre{background:#23262a;color:#aef;border-radius:6px;padding:2px 5px}

/* Markdown lists fix */
.markdown-body ul,.markdown-body ol{
  margin:.7em 0 .7em 1.5em!important;
  padding-left:1.2em!important;
  list-style-position:outside!important;
  list-style-type:disc!important;
  display:block!important;
}
.markdown-body ol{list-style-type:decimal!important}
.markdown-body li{margin-bottom:.3em!important;display:list-item!important}

/* INPUT BAR â€” flattened, rectangular, with leading + */
#prompt-form.chat-input-bar{
  position:fixed;left:0;right:0;bottom:24px;z-index:20;
  max-width:720px;margin:0 auto;
  display:grid;grid-template-columns:40px 1fr auto auto;align-items:center;gap:10px;
  padding:10px 12px;background:rgba(27,30,34,.96);
  border:1px solid #2a2e33;border-radius:12px;box-shadow:0 10px 32px rgba(0,0,0,.35);
  backdrop-filter:blur(2px);
}
.icon-round{
  width:36px;height:36px;display:grid;place-items:center;
  border-radius:10px;border:1px solid #2a2e33;background:#171a1e;color:#aab2bd;
  font-size:20px;line-height:1;cursor:pointer;
}
.icon-round:hover{background:#1f2328;color:#e6e9ee}

#prompt{
  width:100%;background:#0f1215;color:var(--text);
  border:1px solid #2a2e33;border-radius:10px;padding:10px 12px;font-size:16px;outline:none;
}
#prompt:focus{border-color:#3c82f6;box-shadow:0 0 0 2px rgba(60,130,246,.25)}

#send,#stop{
  height:36px;padding:0 14px;border-radius:10px;border:1px solid #2a2e33;
  background:#2a61ff;color:#fff;cursor:pointer;
}
#stop{background:#3a3f46;color:#d6d9df}
#send:disabled,#stop:disabled{opacity:.5;cursor:not-allowed}

/* Status */
#status{color:var(--text-light);font-size:.98em;text-align:center;margin:1.2em 0 0}
