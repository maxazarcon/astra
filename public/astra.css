:root{
  --bg:#0f1114;
  --text:#f1f3f6;
  --muted:#a9b0bb;
  --card:#191c20;
  --panel:#1b1e22;
  --line:#262a30;
  --user:#2d61ff;
  --ai:#24282e;
  --accent:#3c82f6;

  --header-h:64px;        /* header height */
  --center-w: 720px;      /* chat column width */
  --gutter-w: 320px;      /* side padding blocks */
  --input-h: 56px;        /* input bar height */
  --radius:12px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Noto Sans",sans-serif;
}

/* HEADER */
.topbar{
  position:sticky; top:0; z-index:20;
  height:var(--header-h);
  display:flex; align-items:center; justify-content:space-between;
  padding:0 20px;
  background:var(--bg);
  border-bottom:1px solid var(--line);
}
.topbar__left{display:flex; align-items:center; gap:12px}
.brand{letter-spacing:.18em; font-size:20px; font-family:Georgia,serif}
.icon-btn{background:none;border:none;color:var(--text);font-size:22px;cursor:pointer;border-radius:8px;padding:4px 8px}
.icon-btn:hover{background:#23262a55}
.topbar__right{display:flex;align-items:center;gap:12px}
.avatar.ph{width:28px;height:28px;border-radius:50%;background:#2a2e33;border:1px solid var(--line)}

/* SETTINGS */
.sidebar{
  position:fixed;left:-320px;top:0;height:100%;width:320px;z-index:50;
  background:var(--panel); color:var(--text); box-shadow:2px 0 24px #0007;
  transition:left .23s cubic-bezier(.43,.37,.26,1.19);
}
.sidebar.open{left:0}
#sidebar-overlay{display:none;position:fixed;inset:0;background:#1118;z-index:49}
#sidebar.open ~ #sidebar-overlay{display:block}
.sidebar-content{padding:22px 18px;display:flex;flex-direction:column;gap:14px}
.close-btn{font-size:28px;align-self:flex-end}
.sidebar-content label{display:flex;justify-content:space-between;font-size:14px}
.sidebar-content label span{color:var(--muted)}
.sidebar-content input[type="range"]{width:100%}

.setting-description {
  text-align: center;
  font-size: 12px;
  color: var(--muted);
  margin-top: -8px;
  margin-bottom: 8px;
}

/* 3-COLUMN PAGE GRID */
.page3{
  display:grid;
  grid-template-columns: minmax(12px,1fr) minmax(280px,var(--center-w)) minmax(12px,1fr);
  column-gap: 28px;
  align-items:start;
  min-height: calc(100vh - var(--header-h));
  padding: 18px 20px 28px;
}
.gutter{
  min-height: 100%;
  /* use as padding/empty columns per wireframe */
}

/* CENTER COLUMN */
.center-col{
  position:relative;   /* for absolute input bar */
  min-height: calc(100vh - var(--header-h) - 46px);
}

/* CHAT SURFACE */
.chat-thread{
  background:var(--panel);
  border:1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: 0 12px 36px rgba(0,0,0,.25);
  padding: 16px 14px;
  height: calc(100vh - var(--header-h) - var(--input-h) - 56px); /* visible area above input */
  overflow-y: auto;
  display:flex; flex-direction:column; gap:14px;
}

/* MESSAGES */
.message{display:flex;gap:10px;align-items:flex-end}
.message.user{justify-content:flex-end}
.message.ai{justify-content:flex-start}

.message.user .bubble-group {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 8px;
}

.msg-image {
  max-width: 320px;
  max-height: 320px;
  border-radius: 12px;
  border: 1px solid var(--line);
}

.bubble{
  display:block;
  max-width: 680px;
  padding:12px 14px;
  border-radius: 12px;
  line-height: 1.52;
  word-break: break-word;
  box-shadow: 0 2px 8px rgba(0,0,0,.15);
}
.user .bubble{background:var(--user);color:#fff}
.ai .bubble{background:var(--ai);color:var(--text)}
.bubble code,.bubble pre{background:#23262a;color:#aef;border-radius:6px;padding:2px 5px}

/* Markdown lists */
.markdown-body ul,.markdown-body ol{
  margin:.7em 0 .7em 1.5em;
  padding-left:1.2em;
  list-style-position:outside;
}
.markdown-body ol{list-style-type:decimal}
.markdown-body li{margin-bottom:.3em}

/* INPUT BAR â€“ pinned to bottom of center column */
.inputbar{
  position:absolute; left:0; right:0; bottom:0;
  min-height: var(--input-h);
  display:grid; grid-template-columns:44px 1fr auto auto; align-items:center; gap:10px;
  background: rgba(27,30,34,.98);
  border:1px solid var(--line);
  border-radius: 12px;
  padding: 10px 12px;
  box-shadow: 0 10px 32px rgba(0,0,0,.35);
}

.prompt-wrapper{
  display: flex;
  flex-direction: column;
  gap: 8px;
  width: 100%;
}

#preview-container{
  display: flex;
  gap: 8px;
  padding: 0 4px;
}

.img-preview{
  position: relative;
}

.img-preview img{
  width: 48px;
  height: 48px;
  border-radius: 8px;
  object-fit: cover;
}

.img-preview .remove-btn{
  position: absolute;
  top: -4px;
  right: -4px;
  width: 16px;
  height: 16px;
  background: #000c;
  color: #fff;
  border: 1px solid #fff8;
  border-radius: 50%;
  font-size: 11px;
  font-weight: bold;
  cursor: pointer;
  display: grid;
  place-items: center;
  padding: 0;
  line-height: 1;
}

.icon-round{
  width:36px;height:36px;display:grid;place-items:center;
  border-radius:50%;border:1px solid var(--line);
  background:#171a1e;color:#aab2bd;font-size:20px;cursor:pointer;
}
.icon-round:hover{background:#20242a;color:#eef1f6}

#prompt{
  width:100%;
  height:36px;
  background:#0f1215; color:var(--text);
  border:1px solid var(--line); border-radius:10px;
  padding:0 12px; font-size:16px; outline:none;
}
#prompt:focus{border-color:var(--accent); box-shadow:0 0 0 2px rgba(60,130,246,.25)}

#send,#stop{
  height:36px; padding:0 14px; border-radius:10px;
  border:1px solid var(--line); cursor:pointer;
}
#send{background:#2a61ff;color:#fff}
#stop{background:#3a3f46;color:#d6d9df}
#send:disabled,#stop:disabled{opacity:.55;cursor:not-allowed}

/* Status text */
.status{color:var(--muted);font-size:.95rem;text-align:center;margin-top:10px}

/* Responsive tweak: reduce gutters on small screens */
@media (max-width: 1100px){
  :root{ --gutter-w: 12px; --center-w: 100%; }
  .page3{ grid-template-columns: 12px 1fr 12px; }
}
